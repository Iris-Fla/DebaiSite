<template>
  <div class="container">
    <div
      class="animated_img card mx-auto my-5 shadow-lg mb-5 bg-body rounded-5"
      style="max-width: 25rem"
    >
      <img
        :src="questions[NowQuestion].fileName"
        class="card-img-to rounded-5 rounded-bottom"
        alt="..."
      />
      <div class="card-body mb-3">
        <p class="card-title text-center debacolor title_text">
          <span>{{ questions[NowQuestion].title_text }}</span>
        </p>
        <p class="card-title text-center red title_text">
          <span>{{ questions[NowQuestion].red_title_text }}</span>
        </p>
        <p class="card-text text-center fs-5">
          {{ currentQuestion }}
        </p>
        <div
          @click="checkAnswer(0)"
          class="btn hover-effect a mt-4 mx-3 d-flex align-items-center rounded-pill text-center"
          style="height: 60px"
        >
          {{ questions[NowQuestion].ans[0] }}
        </div>
        <div
          @click="checkAnswer(1)"
          class="btn hover-effect b mt-4 mx-3 d-flex align-items-center rounded-pill text-center"
          style="height: 60px"
        >
          {{ questions[NowQuestion].ans[1] }}
        </div>
        <div
          @click="checkAnswer(2)"
          class="btn hover-effect c mt-4 mx-3 d-flex align-items-center rounded-pill text-center"
          style="height: 60px"
        >
          {{ questions[NowQuestion].ans[2] }}
        </div>
      </div>
    </div>
  </div>
</template>
<script setup>
const questions = ref([
  {
    title_text: "ãƒ‡ãƒã„ï¼",
    questionText: "ã“ã®æ„›ãã‚‹ã—ã„ç”Ÿãç‰©ã®åå‰ã¯ï¼Ÿ",
    ans: ["ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸ", "ãƒãƒ€ãƒã‚«ãƒ‡ãƒãƒã‚ºãƒŸ", "ãƒ‡ãƒãƒãƒ€ã‚«ãƒã‚ºãƒŸ"],
    correctAnswer: 0,
    fileName: "/hadadeba.jpg",
    alert: "ãƒ‡ãƒã„ã­ðŸ‘ðŸ˜",
  },
  {
    title_text: "ä¸æ€è­°ï¼",
    questionText: "ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸã«ä½“æ¯›ãŒãªã„ç†ç”±ã¯ï¼Ÿ",
    ans: ["å¤©æ•µã‹ã‚‰èº«ã‚’å®ˆã‚‹ãŸã‚", "ä½“æ¸©èª¿æ•´ã‚’ã—ãªãã¦ã‚‚ã„ã„ãŸã‚", "ãªãžã„"],
    correctAnswer: 1,
    fileName: "/hamu.jpg",
    alert:
      "ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸã¯åŸºæœ¬åœ°ä¸­ã§ç”Ÿæ´»ã™ã‚‹ã‹ã‚‰ã€ä½“æ¸©èª¿æ•´ã‚’ã—ãªãã¦ã‚‚ã‚ˆã„ï¼ðŸ˜ðŸ˜",
  },
  {
    title_text: "æ­¯ï¼",
    questionText: "ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸã®æ­¯ã¯ä½•æ—¥ã§ç”Ÿãˆå¤‰ã‚ã‚‹ï¼Ÿ",
    ans: ["1æ—¥", "1é€±é–“", "1ãƒ¶æœˆ"],
    correctAnswer: 1,
    fileName: "/Lion.jpg",
    alert:
      "æ­¯ã¯1é€±é–“ã«5ãƒŸãƒªã®é€Ÿã•ã§ä¼¸ã³ç¶šã‘ã¦ãŠã‚Šã€è¡¨é¢ã«å‡ºã¦ã„ã‚‹æ­¯ã®é•·ã•ã‚‚ãŠã‚ˆã5ãƒŸãƒªã»ã©ãªã®ã§ã€1é€±é–“ã§æ­¯ãŒæ–°ã—ãå…¥ã‚Œæ›¿ã‚ã‚‹ã“ã¨ã«ãªã‚‹ãƒ‡ãƒ",
  },
  {
    title_text: "Life of Deba",
    questionText: "ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸã®å¯¿å‘½ã¯ç´„ä½•å¹´?",
    ans: ["5", "10", "30"],
    correctAnswer: 2,
    fileName: "/many_deba_illust.png",
    alert:
      "ãƒ‡ãƒãŒé•·ç”Ÿãã™ã‚‹ç§˜å¯†ã¯ä»Šã‚‚ç ”ç©¶ã•ã‚Œã¦ã„ã‚‹...!ðŸ˜‰ã‚¬ãƒ³é˜²æ­¢ã«ã‚‚åŠ¹æžœãŒã‚ã‚‹ã‹ã‚‚ï¼",
  },
  {
    title_text: "ãƒ‡ãƒï¼Ÿ",
    questionText: "ã“ã‚Œã¯ä½•?",
    ans: ["ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸ", "ã¡ãã‚", "ã‚ãã¡ã‚“"],
    correctAnswer: 1,
    fileName: "/tikuwa1.jpg",
    alert: "ã¡ãã‚ã ã‚ˆ",
  },
  {
    title_text: "ãƒ‡ãƒï¼",
    questionText: "ã“ã‚Œã¯ä½•?",
    ans: ["ãƒãƒ€ã‚¬ãƒ‡ãƒãƒã‚ºãƒŸ", "ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸ", "ã¡ãã‚"],
    correctAnswer: 1,
    fileName: "/tikuwa.jpg",
    alert: "ã¡ãã‚ã˜ã‚ƒãªã„ã‚ˆ",
  },
]);
// ã‚¹ã‚³ã‚¢
const score = ref(0);
// å•é¡Œæ•°
const count_question = ref(questions.value.length);
// ç¾åœ¨ã®å•é¡Œ
const NowQuestion = ref(0);

// æ¬¡ã®å•é¡Œã¸(æœ€çµ‚å•é¡Œã®å ´åˆã¯Scoreã‚’è¡¨ç¤ºã™ã‚‹ã€‚)
const NextQuestion = () => {
  if (NowQuestion.value === count_question.value - 1) {
    alert("çµ‚äº†ï¼ã‚ãªãŸã®æ­£è§£æ•°ã¯" + score.value + "/" + count_question.value);
    NowQuestion.value = 0;
    score.value = 0;
    location = "./";
    return;
  }
  NowQuestion.value++;
};

// å•é¡Œæ–‡ã®è¡¨ç¤º
const currentQuestion = computed(() => {
  return questions.value[NowQuestion.value].questionText;
});

// ç­”ãˆåˆã‚ã›
const checkAnswer = (index) => {
  if (index === questions.value[NowQuestion.value].correctAnswer) {
    alert("æ­£è§£\n" + questions.value[NowQuestion.value].alert);
    score.value++;
    NextQuestion();
    animated_image();
  } else {
    alert("ä¸æ­£è§£\n" + questions.value[NowQuestion.value].alert);
    NextQuestion();
    animated_image();
  }
};

// ç”»åƒã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³(ãƒ•ã‚§ãƒ¼ãƒ‰)
const animated_image = () => {
  const img = document.querySelector(".animated_img");
  img.classList.add("animated");
  setTimeout(() => {
    img.classList.remove("animated");
  }, 500);
};
</script>
<style scoped>
.animated {
  animation: fadeInOut 1s infinite;

  will-change: transform;
}
.red {
  color: #d41515;
}
.title_text {
  font-size: 80px;
}
.hover-effect:hover {
  color: #ffffff;
  background-color: rgb(77, 44, 44);
}
.btn {
  color: var(--bs-white);
}
.a {
  background: #87cf91;
}
.b {
  background: #86cfcc;
}
.c {
  background: #c78282;
}

@keyframes fadeInOut {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
</style>
