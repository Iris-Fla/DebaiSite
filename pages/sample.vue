<template>
  <div class="container">
    <div
      class="animated_img card mx-auto my-5 shadow-lg mb-5 bg-body rounded-5"
      style="max-width: 25rem"
    >
      <img
        :src="questions[NowQuestion].fileName"
        class="card-img-to rounded-5 rounded-bottom"
        alt="..."
      />
      <div class="card-body mb-3">
        <p class="card-title text-center debacolor title_text">
          <span>{{ questions[NowQuestion].title_text }}</span>
        </p>
        <p class="card-title text-center red title_text">
          <span>{{ questions[NowQuestion].red_title_text }}</span>
        </p>
        <p class="card-text text-center fs-5">
          {{ currentQuestion }}
        </p>
        <div
          @click="checkAnswer(0)"
          class="btn hover-effect a mt-4 mx-3 d-flex align-items-center rounded-pill text-center"
          style="height: 60px"
        >
          {{ questions[NowQuestion].ans[0] }}
        </div>
        <div
          @click="checkAnswer(1)"
          class="btn hover-effect b mt-4 mx-3 d-flex align-items-center rounded-pill text-center"
          style="height: 60px"
        >
          {{ questions[NowQuestion].ans[1] }}
        </div>
        <div
          @click="checkAnswer(2)"
          class="btn hover-effect c mt-4 mx-3 d-flex align-items-center rounded-pill text-center"
          style="height: 60px"
        >
          {{ questions[NowQuestion].ans[2] }}
        </div>
      </div>
    </div>
  </div>
</template>
<script setup>

const questions = ref([
  {
    title_text: "ãƒ‡ãƒã„ï¼",
    questionText: "ã“ã®æ„›ãã‚‹ã—ã„ç”Ÿãç‰©ã®åå‰ã¯ï¼Ÿ",
    ans: ["ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸ", "ãƒãƒ€ãƒã‚«ãƒ‡ãƒãƒã‚ºãƒŸ", "ãƒ‡ãƒãƒãƒ€ã‚«ãƒã‚ºãƒŸ"],
    correctAnswer: 0,
    fileName: "/hadadeba.jpg",
    alert: "ãƒ‡ãƒã„ã­ðŸ‘ðŸ˜",
  },
  {
    title_text: "ä¸æ€è­°ï¼",
    questionText: "ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸã«ä½“æ¯›ãŒãªã„ç†ç”±ã¯ï¼Ÿ",
    ans: ["å¤©æ•µã‹ã‚‰èº«ã‚’å®ˆã‚‹ãŸã‚", "ä½“æ¸©èª¿æ•´ã‚’ã—ãªãã¦ã‚‚ã„ã„ãŸã‚", "ãªãžã„"],
    correctAnswer: 1,
    fileName: "/hamu.jpg",
    alert: "ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸã¯åŸºæœ¬åœ°ä¸­ã§ç”Ÿæ´»ã™ã‚‹ã‹ã‚‰ã€ä½“æ¸©èª¿æ•´ã‚’ã—ãªãã¦ã‚‚ã‚ˆã„ï¼ðŸ˜ðŸ˜",
  },
  {
    title_text: "ä¸æ€è­°ï¼",
    questionText: "ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸã«ä½“æ¯›ãŒãªã„ç†ç”±ã¯ï¼Ÿ",
    ans: ["å¤©æ•µã‹ã‚‰èº«ã‚’å®ˆã‚‹ãŸã‚", "ä½“æ¸©èª¿æ•´ã‚’ã—ãªãã¦ã‚‚ã„ã„ãŸã‚", "ãªãžã„"],
    correctAnswer: 1,
    fileName: "/hamu.jpg",
    alert: "ãƒãƒ€ã‚«ãƒ‡ãƒãƒã‚ºãƒŸã¯åŸºæœ¬åœ°ä¸­ã§ç”Ÿæ´»ã™ã‚‹ã‹ã‚‰ã€ä½“æ¸©èª¿æ•´ã‚’ã—ãªãã¦ã‚‚ã‚ˆã„ï¼ðŸ˜ðŸ˜",
  },
  {
    title_text: "ç°¡å˜ï¼",
    questionText: "Pã‚¢ã‚ºãƒ¼ãƒ«ãƒ¬ãƒ¼ãƒ³ã§ä¸Šè¨˜ç”»åƒã®ä¿¡é ¼åº¦ã¯ï¼Ÿ",
    ans: ["70%", "77.7%", "å¤§å½“ã‚Šæ¿ƒåŽš?!"],
    correctAnswer: 0,
    fileName: "/saikyou.jpg",
    alert: "ã“ã®æ¼”å‡ºã§ä¿¡é ¼åº¦ãŒ70%ã§ã™ã€‚é‡‘æ–‡å­—å‡ºã™ãªã‚‰80â†‘ã¯æ¬²ã—ã„ï¼",
  },
  {
    title_text: "",
    questionText: "ã“ã®çµµã®ã‚¿ã‚¤ãƒˆãƒ«ã¯ï¼Ÿ",
    ans: ["", "", ""],
    correctAnswer: 444,
    fileName: "/y1.jpg",
    alert:""
  },
  {
    red_title_text: "",
    questionText: "Xå›žè¦‹ãŸã‚‰ã€‡ã¬çµµã€‚Xã«å…¥ã‚‹æ•°å­—",
    ans: ["1", "2", "3"],
    correctAnswer: 2,
    fileName: "/y2.jpg",
    alert:"WOW"
  },
  {
    red_title_text: "ã‚ã£...",
    questionText: "",
    ans: ["é ­", "è…•", "èº«"],
    correctAnswer: 444,
    fileName: "/y3.jpg",
  },
]);
// ã‚¹ã‚³ã‚¢
const score = ref(0);
// å•é¡Œæ•°
const count_question = ref(questions.value.length);
// ç¾åœ¨ã®å•é¡Œ
const NowQuestion = ref(0);

// æ¬¡ã®å•é¡Œã¸(æœ€çµ‚å•é¡Œã®å ´åˆã¯Scoreã‚’è¡¨ç¤ºã™ã‚‹ã€‚)
const NextQuestion = () => {
  if (NowQuestion.value === count_question.value - 1) {
    alert("çµ‚äº†ï¼ã‚ãªãŸã®æ­£è§£æ•°ã¯" + score.value + "/" + count_question.value);
    NowQuestion.value = 0;
    score.value = 0;
    return;
  }
  NowQuestion.value++;
};

// å•é¡Œæ–‡ã®è¡¨ç¤º
const currentQuestion = computed(() => {
  return questions.value[NowQuestion.value].questionText;
});

// ç­”ãˆåˆã‚ã›
const checkAnswer = (index) => {
  if (index === questions.value[NowQuestion.value].correctAnswer) {
    alert("æ­£è§£\n"+questions.value[NowQuestion.value].alert);
    score.value++;
    animated_image();
    NextQuestion();
    
  } else {
    alert("ä¸æ­£è§£\n"+questions.value[NowQuestion.value].alert);
    animated_image();
    NextQuestion();
  }
};

// ç”»åƒã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³(æœªå®Ÿè£…)
const animated_image = () => {
  const img = document.querySelector(".animated_img");
    img.classList.add("animated");
    setTimeout(() => {
      img.classList.remove("animated");
    }, 1000);
  };

</script>
<style>
.animated {
  animation: fadeInOut 1s infinite;
}
.debacolor {
  color: #fcbda3;
}
.red {
  color: #d41515;
}
.btn {
  color: var(--bs-white);
}
.hover-effect:hover {
  background-color: #fcbda3;
}
.a {
  background: #87cf91;
}
.b {
  background: #86cfcc;
}
.c {
  background: #c78282;
}
.title_text {
  font-size: 80px;
}

@keyframes fadeInOut {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
</style>